<!DOCTYPE html><html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>کدنویسی آنلاین</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function changeLanguage(lang) {
      const html = {
        html: document.getElementById('htmlCode').value,
        css: document.getElementById('cssCode').value,
        js: document.getElementById('jsCode').value,
      };
      const iframe = document.getElementById('output');
      iframe.contentDocument.body.innerHTML = `
        <style>${html.css}</style>
        ${html.html}
        <script>${html.js}<\/script>
      `;
    }
    function runCode() {
      const html = document.getElementById('htmlCode').value;
      const css = document.getElementById('cssCode').value;
      const js = document.getElementById('jsCode').value;
      const output = document.getElementById('output');
      const doc = output.contentDocument || output.contentWindow.document;
      doc.open();
      doc.write(`<!DOCTYPE html><html><head><style>${css}</style></head><body>${html}<script>${js}<\/script></body></html>`);
      doc.close();
    }
    function downloadImage() {
      html2canvas(document.querySelector("#output").contentDocument.body).then(canvas => {
        const a = document.createElement("a");
        a.href = canvas.toDataURL("image/png");
        a.download = "output.png";
        a.click();
      });
    }
    function downloadVideo() {
      html2canvas(document.querySelector("#output").contentDocument.body).then(canvas => {
        const stream = canvas.captureStream();
        const recorder = new MediaRecorder(stream);
        const chunks = [];
        recorder.ondataavailable = e => chunks.push(e.data);
        recorder.onstop = () => {
          const blob = new Blob(chunks, { type: "video/webm" });
          const a = document.createElement("a");
          a.href = URL.createObjectURL(blob);
          a.download = "output.webm";
          a.click();n      };
        recorder.start();
        setTimeout(() => recorder.stop(), 5000);
      });
    }
    function toggleTheme() {
      const html = document.documentElement;
      html.classList.toggle('dark');
      html.classList.toggle('light');
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body class="bg-white dark:bg-gray-900 text-black dark:text-white transition-all">
  <div class="p-4 flex justify-between items-center flex-wrap gap-2">
    <div class="flex gap-2 flex-wrap">
      <button onclick="toggleTheme()" class="px-4 py-2 rounded bg-gray-200 dark:bg-gray-700">🌓 تم شب/روز</button>
      <button onclick="runCode()" class="px-4 py-2 rounded bg-blue-500 text-white">▶️ اجرا</button>
      <button onclick="downloadImage()" class="px-4 py-2 rounded bg-green-500 text-white">📷 عکس</button>
      <button onclick="downloadVideo()" class="px-4 py-2 rounded bg-red-500 text-white">🎥 ویدیو</button>
    </div>
    <div class="flex gap-2">
      <select id="langSelect" class="px-2 py-1 rounded border">
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="js">JavaScript</option>
      </select>
    </div>
  </div>
  <div class="flex flex-col h-screen">
    <div class="w-full h-[35%] bg-black p-2 overflow-auto text-green-400 text-sm font-mono">
      <div class="mb-1">🖥️ ترمینال خروجی (بدون پیام اجرا)</div>
      <div class="text-xs">درصد بارگذاری: 100%</div>
    </div>
    <div class="w-full h-[65%] flex">
      <div class="w-1/3 p-2">
        <h2 class="text-sm mb-1">HTML</h2>
        <textarea id="htmlCode" class="w-full h-full p-2 bg-gray-100 dark:bg-gray-800 text-black dark:text-white font-mono text-xs"></textarea>
      </div>
      <div class="w-1/3 p-2">
        <h2 class="text-sm mb-1">CSS</h2>
        <textarea id="cssCode" class="w-full h-full p-2 bg-gray-100 dark:bg-gray-800 text-black dark:text-white font-mono text-xs"></textarea>
      </div>
      <div class="w-1/3 p-2">
        <h2 class="text-sm mb-1">JS</h2>
        <textarea id="jsCode" class="w-full h-full p-2 bg-gray-100 dark:bg-gray-800 text-black dark:text-white font-mono text-xs"></textarea>
      </div>
    </div>
    <iframe id="output" class="w-full h-[300px] border-t shadow-inner"></iframe>
  </div>
</body>
</html>
