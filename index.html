// محیط برنامه‌نویسی کامل با HTML/CSS/JS + حالت تک‌زبانه و ترکیبی + قابلیت دانلود تصویر یا فیلم از خروجی

<!DOCTYPE html><html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>شبیه‌ساز کدنویسی</title>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.css" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; direction: rtl; font-family: sans-serif; }
    body { margin: 0; background-color: #1e1e1e; color: #fff; }
    header { background: #111; padding: 10px; display: flex; justify-content: space-between; align-items: center; }
    header button { background: #333; color: #fff; border: none; padding: 8px 14px; margin: 0 4px; cursor: pointer; border-radius: 8px; }
    .editor-container { display: flex; height: 50vh; border-bottom: 4px solid #333; }
    .editor { flex: 1; padding: 10px; background: #282c34; color: #f8f8f2; outline: none; font-family: monospace; resize: none; overflow: auto; border-left: 2px solid #444; }
    .editor:first-child { border-left: none; }
    .editor::selection { background: #444; }
    .output-container { height: 50vh; background: #fff; box-shadow: 0 0 10px #000; position: relative; }
    iframe { width: 100%; height: 100%; border: none; }
    .mode-switch { margin: 0 10px; }
    select { padding: 6px; background: #222; color: #fff; border-radius: 6px; border: 1px solid #444; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <header>
    <div>
      <button onclick="runCode()">▶️ اجرا</button>
      <button onclick="downloadImage()">📷 عکس خروجی</button>
      <button onclick="downloadVideo()">🎥 ویدیو خروجی</button>
    </div>
    <div class="mode-switch">
      حالت زبان:
      <select id="mode" onchange="switchMode()">
        <option value="combo">HTML/CSS/JS (ترکیبی)</option>
        <option value="html">HTML (تکی)</option>
        <option value="css">CSS (تکی)</option>
        <option value="js">JS (تکی)</option>
        <option value="py">Python (شبیه‌سازی)</option>
      </select>
    </div>
  </header>
  <div class="editor-container">
    <textarea id="html" class="editor" placeholder="کد HTML بنویسید..." spellcheck="false"></textarea>
    <textarea id="css" class="editor" placeholder="کد CSS بنویسید..." spellcheck="false"></textarea>
    <textarea id="js" class="editor" placeholder="کد JavaScript بنویسید..." spellcheck="false"></textarea>
    <textarea id="py" class="editor hidden" placeholder="کد Python بنویسید..." spellcheck="false"></textarea>
  </div>
  <div class="output-container">
    <iframe id="output"></iframe>
  </div>  <script>
    const htmlEditor = document.getElementById("html");
    const cssEditor = document.getElementById("css");
    const jsEditor = document.getElementById("js");
    const pyEditor = document.getElementById("py");
    const modeSelect = document.getElementById("mode");

    function runCode() {
      const mode = modeSelect.value;
      if (mode === "py") {
        const pyCode = pyEditor.value;
        document.getElementById("output").srcdoc = `<pre style='color:black;padding:10px;'>نتیجه اجرای Python:\n${pyCode}</pre>`;return;
  }
  const html = htmlEditor.value;
  const css = `<style>${cssEditor.value}</style>`;
  const js = `<script>${jsEditor.value}<\/script>`;
  document.getElementById("output").srcdoc = html + css + js;
}

function switchMode() {
  const mode = modeSelect.value;
  const combo = mode === "combo";
  htmlEditor.style.display = combo || mode === "html" ? "block" : "none";
  cssEditor.style.display = combo || mode === "css" ? "block" : "none";
  jsEditor.style.display = combo || mode === "js" ? "block" : "none";
  pyEditor.classList.toggle("hidden", mode !== "py");
}

function downloadImage() {
  alert("قابلیت دانلود عکس به‌زودی اضافه می‌شود.");
}

function downloadVideo() {
  let duration = prompt("مدت زمان ویدیو را وارد کنید (بین 10 تا 90 ثانیه):", "30");
  if (duration < 10 || duration > 90) return alert("زمان باید بین 10 تا 90 ثانیه باشد");
  alert("قابلیت ضبط ویدیو از خروجی به‌زودی فعال خواهد شد.");
}

  </script>
</body>
</html>
