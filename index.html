<!DOCTYPE html><html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>شبیه‌ساز کدنویسی</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/editor/editor.main.css" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Vazirmatn', sans-serif; background: #1e1e1e; color: white; }
    header {
      background: #252526;
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      align-items: center;
      border-bottom: 1px solid #444;
    }
    header .menu {
      display: flex;
      gap: 20px;
    }
    header .menu a {
      color: white;
      text-decoration: none;
      font-size: 14px;
    }
    .container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 50px);
    }
    .editor-container {
      flex: 1;
      display: flex;
    }
    .editor, .preview {
      flex: 1;
      height: 100%;
      border: 1px solid #333;
    }
    #preview {
      background: white;
      color: black;
    }
    .toolbar {
      padding: 10px;
      background: #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    button {
      background: #007acc;
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    select {
      padding: 5px;
      background: #444;
      color: white;
      border: 1px solid #555;
      border-radius: 4px;
    }
    .fullscreen {
      height: 100%;
    }
  </style>
</head>
<body>
  <header>
    <div class="menu">
      <a href="#">درباره ما</a>
      <a href="#">راهنما</a>
      <a href="#">تماس با ما</a>
      <a href="#">ورود / ثبت‌نام</a>
    </div>
    <div>
      <select id="themeSelector">
        <option value="vs-dark">تاریک</option>
        <option value="vs">روشن</option>
        <option value="hc-black">کنتراست بالا</option>
      </select>
    </div>
  </header>  <div class="toolbar">
    <button onclick="runCode()"><i class="fa fa-play"></i> اجرا کن</button>
    <input type="file" onchange="loadFile(event)" />
    <button onclick="downloadCode()"><i class="fa fa-download"></i> دانلود کد</button>
    <select id="languageSelector">
      <option value="html">HTML/CSS/JS</option>
      <option value="javascript">JavaScript</option>
      <option value="python">Python</option>
      <option value="cpp">C++</option>
      <option value="java">Java</option>
    </select>
  </div>  <div class="container">
    <div class="editor-container">
      <div id="editor" class="editor"></div>
      <iframe id="preview" class="preview"></iframe>
    </div>
  </div>  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script>  <script>
    let editor;
    require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs' } });
    require(['vs/editor/editor.main'], function () {
      editor = monaco.editor.create(document.getElementById('editor'), {
        value: '<!DOCTYPE html>\n<html>\n<head><style>body { font-family: sans-serif; }</style></head>\n<body>\n<h1>سلام دنیا!</h1>\n<script>console.log("Hello World")</script>\n</body>\n</html>',language: 'html',
    theme: 'vs-dark',
    automaticLayout: true,
  });
});

document.getElementById('themeSelector').addEventListener('change', (e) => {
  monaco.editor.setTheme(e.target.value);
});

document.getElementById('languageSelector').addEventListener('change', (e) => {
  const lang = e.target.value;
  monaco.editor.setModelLanguage(editor.getModel(), lang === 'html' ? 'html' : lang);
});

function runCode() {
  const lang = document.getElementById('languageSelector').value;
  const code = editor.getValue();

  if (lang === 'html') {
    document.getElementById('preview').srcdoc = code;
  } else {
    alert('اجرای زنده فقط برای HTML/CSS/JS فعال است. برای زبان‌ دیگر از API استفاده خواهد شد.');
  }
}

function loadFile(event) {
  const reader = new FileReader();
  reader.onload = function(e) {
    editor.setValue(e.target.result);
  };
  reader.readAsText(event.target.files[0]);
}

function downloadCode() {
  const blob = new Blob([editor.getValue()], { type: 'text/plain' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'code.txt';
  a.click();
}

  </script>
</body>
</html>
